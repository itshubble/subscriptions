(this["webpackJsonphubble-console"]=this["webpackJsonphubble-console"]||[]).push([[12],{325:function(e,t,a){"use strict";var n=a(32),i=a(0),r=a.n(i),l=a(2),c=a(51),o=a(16),s=a(290),d=a(292),u=a(291),m=a(70),f=Object(c.a)((function(e){return{appBar:{color:e.palette.primary,background:"white"},toolbar:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},buttons:{marginLeft:"auto"},action:{textTransform:"none",paddingLeft:16,paddingRight:16},title:{color:e.palette.text.primary,fontWeight:500},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(o.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},actionIcon:{marginRight:4}}}));t.a=function(e){var t=f(),a=e.title,i=e.selectionCount,c=e.actions,o=e.onAction,g=function(e){return function(){return o(e)}},p=r.a.createElement(m.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"},a),h=r.a.createElement(m.a,{className:t.title,variant:"subtitle1",component:"div"},i," selected"),b=i>0;return r.a.createElement(s.a,{position:"static",elevation:1,className:t.appBar},r.a.createElement(u.a,{className:Object(l.a)(t.toolbar,Object(n.a)({},t.highlight,b))},b?h:p,r.a.createElement("div",{className:t.buttons},b?c?c.map((function(e){return!e.primary&&r.a.createElement(d.a,{className:t.action,variant:"text",size:"small",color:"primary",onClick:g(e.identifier)},r.a.createElement(e.icon,{className:t.actionIcon}),e.title)})):null:c?r.a.createElement(r.a.Fragment,null,c.map((function(e){return e.primary&&r.a.createElement(d.a,{className:t.action,variant:"text",size:"small",color:"primary",onClick:g(e.identifier)},r.a.createElement(e.icon,{className:t.actionIcon}),e.title)}))):null)))}},328:function(e,t,a){"use strict";function n(e){return e.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}a.d(t,"a",(function(){return n}))},330:function(e,t,a){"use strict";a.d(t,"c",(function(){return v})),a.d(t,"b",(function(){return y})),a.d(t,"a",(function(){return E}));var n=a(0),i=a.n(n),r=a(300),l=a(316),c=a(312),o=a(301),s=a(70),d=a(125),u=a(126),m=a(292),f=a(51),g=a(137),p=a(302),h=a(25),b=Object(f.a)((function(e){return{root:{padding:16,marginLeft:16},title:{fontSize:16,marginBottom:24},clear:{display:"block",marginLeft:"auto",marginTop:16},datePicker:{marginTop:e.spacing(3),marginBottom:0}}}));function v(e,t){console.log(t);var a={};return e.forEach((function(e){"time_range"===e.type?(a[e.identifier]=t[e.identifier].option,"custom"===t[e.identifier].option&&(a[e.startIdentifier]=t[e.identifier].startDate.getTime(),a[e.endIdentifier]=t[e.identifier].endDate.getTime())):a[e.identifier]=t[e.identifier]})),console.log(a),a}function y(e,t){var a={};return e.forEach((function(e){if("time_range"===e.type){if(a[e.identifier]={},e.identifier in t?a[e.identifier].option=t[e.identifier]:a[e.identifier].option=e.defaultValue.option,e.startIdentifier in t){var n=parseInt(t[e.startIdentifier],10);a[e.identifier].startDate=new Date(n)}else a[e.identifier].startDate=e.defaultValue.startDate;if(e.endIdentifier in t){var i=parseInt(t[e.endIdentifier],10);a[e.identifier].endDate=new Date(i)}else a[e.identifier].endDate=e.defaultValue.endDate}else e.identifier in t?a[e.identifier]=t[e.identifier]:a[e.identifier]=e.defaultValue})),a}function E(e){var t=e.fields,a=e.values,n=e.onValueChange,f=e.onClear,v=b(),y=function(e){return function(t){n(e,t.target.value)}},E=function(e){return function(t){var i=Object.assign({},a[e]);i.option=t.target.value,n(e,i)}},C=function(e,t){return function(i){var r=Object.assign({},a[e.identifier]);r[t]=i,n(e.identifier,r)}};return i.a.createElement(h.a,{utils:g.a},i.a.createElement(d.a,{className:v.root},i.a.createElement(s.a,{className:v.title,variant:"h6"},"Filters"),i.a.createElement(u.a,{container:!0,spacing:3},t.map((function(e){return i.a.createElement(u.a,{item:!0,lg:12},"select"===e.type&&function(e,t){return i.a.createElement(r.a,{variant:"outlined",className:v.control,fullWidth:!0},i.a.createElement(l.a,{id:e.identifier},e.title),i.a.createElement(c.a,{labelId:e.identifier,value:t,onChange:y(e.identifier),label:e.title},e.options.map((function(e){return i.a.createElement(o.a,{value:e.value},e.title)}))))}(e,a[e.identifier]),"time_range"===e.type&&function(e,t){return i.a.createElement("div",null,i.a.createElement(r.a,{variant:"outlined",className:v.control,fullWidth:!0},i.a.createElement(l.a,{id:e.identifier},e.title),i.a.createElement(c.a,{labelId:e.identifier,value:t.option,onChange:E(e.identifier),label:e.title},e.options.map((function(e){return i.a.createElement(o.a,{value:e.value},e.title)})))),"custom"===t.option&&i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{margin:"normal",id:e.identifier+"Start",label:e.startTitle,format:"MM/dd/yyyy",inputVariant:"outlined",fullWidth:!0,value:null===t.startDate?new Date:new Date(t.startDate),onChange:C(e,"startDate"),className:v.datePicker}),i.a.createElement(p.a,{margin:"normal",id:e.identifier+"End",label:e.endTitle,format:"MM/dd/yyyy",inputVariant:"outlined",fullWidth:!0,value:null===t.endDate?new Date:new Date(t.endDate),onChange:C(e,"endDate"),className:v.datePicker})))}(e,a[e.identifier]))}))),i.a.createElement(m.a,{size:"small",color:"secondary",variant:"text",className:v.clear,onClick:f},"Clear")))}},331:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),i=a.n(n),r=a(70),l=a(292),c=a(51),o=Object(c.a)((function(e){return{container:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},image:{width:"auto",height:400,marginTop:96},message:{fontSize:20,fontWeight:400,color:e.palette.text.secondary},action:{marginTop:16}}}));function s(e){var t=o(),a=e.message,n=e.actionText,c=e.actionHandler,s=e.action,d=e.image;return i.a.createElement("div",{className:t.container},i.a.createElement("img",{className:t.image,src:d,alt:""}),i.a.createElement(r.a,{className:t.message},a),s&&i.a.createElement(l.a,{className:t.action,variant:"contained",size:"large",color:"secondary",onClick:c},n))}},336:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a(40),i=a(0),r=a.n(i),l=a(51),c=a(553),o=a(554),s=a(551),d=a(552),u=a(864),m=a(550),f=a(125),g=a(549),p=a(865);function h(e){var t=e.classes,a=e.order,n=e.orderBy,i=e.onRequestSort,l=e.headers;return r.a.createElement(g.a,null,r.a.createElement(m.a,null,l.map((function(e){return r.a.createElement(s.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},r.a.createElement(p.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(l=e.id,function(e){i(e,l)})},e.label,n===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var l}))))}function b(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var v=Object(l.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function y(e){var t=v(),a=e.onSelected,i=e.headers,l=e.selected,g=e.compact,p=e.onClick,y=e.renderCellValue,E=e.rows,C=e.totalRows,w=e.page,D=e.onChangePage,O=e.rowsPerPage,j=e.onChangeRowsPerPage,_=e.descendingComparator,k=r.a.useState("asc"),N=Object(n.a)(k,2),P=N[0],I=N[1],T=r.a.useState("calories"),S=Object(n.a)(T,2),x=S[0],M=S[1],R=O-E.length,V=function(e,t){return function(){t.clickable&&p(e)}};return r.a.createElement("div",{className:t.root},r.a.createElement(f.a,{className:t.paper},r.a.createElement(d.a,null,r.a.createElement(c.a,{className:t.table,size:g?"small":"medium"},r.a.createElement(h,{classes:t,selectionCount:l.length,order:P,orderBy:x,onSelectAll:function(e){if(e.target.checked){var t=E.map((function(e){return e.id}));a(t)}else a([])},onRequestSort:function(e,t){I(x===t&&"asc"===P?"desc":"asc"),M(t)},rowCount:E.length,headers:i}),r.a.createElement(o.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(E,function(e,t,a){return"desc"===t?function(t,n){return e(t,n,a)}:function(t,n){return-e(t,n,a)}}(_||b,P,x)).map((function(e,t){var a=l.indexOf(e.id)>=0;return r.a.createElement(m.a,{hover:!0,role:"checkbox",tabIndex:-1,key:e.identifier,selected:a},function(e,t){return r.a.createElement(r.a.Fragment,null,i.map((function(a,n){return r.a.createElement(s.a,{onClick:V(e,a)},y(e,t,a,n))})))}(e,t))})),R>0&&r.a.createElement(m.a,{style:{height:(g?33:53)*R}},r.a.createElement(s.a,{colSpan:6}))))),r.a.createElement(u.a,{rowsPerPageOptions:[20,40,60,80,100],component:"div",count:C,rowsPerPage:O,page:w,onChangePage:function(e,t){return D(t)},onChangeRowsPerPage:function(e){return j(parseInt(e.target.value,10))}})))}},341:function(e,t,a){"use strict";var n=a(35);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(0)),r=(0,n(a(37)).default)(i.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=r},857:function(e,t,a){"use strict";a.r(t);var n=a(40),i=a(0),r=a.n(i),l=a(126),c=a(51),o=a(28),s=a(20),d=a(336),u=a(325),m=a(330),f=a(331),g=a(19),p=a(328),h=a(341),b=a.n(h),v=a(138),y=a.n(v),E=a(358),C=a.n(E),w=a(357),D=a.n(w),O=a(359),j=a.n(O),_=a(356),k=a.n(_),N=Object(c.a)((function(e){return{container:{padding:16}}})),P=[{id:"referenceId",numeric:!1,disablePadding:!1,label:"Reference ID",clickable:!0},{id:"action",numeric:!1,disablePadding:!1,label:"Action",clickable:!0},{id:"method",numeric:!1,disablePadding:!1,label:"Payment Method",clickable:!0},{id:"created",numeric:!1,disablePadding:!1,label:"Created",clickable:!0},{id:"amount",numeric:!1,disablePadding:!1,label:"Amount",clickable:!0},{id:"tax",numeric:!1,disablePadding:!1,label:"Tax",clickable:!0}],I=[{identifier:"date_range",type:"time_range",title:"Time Range",startTitle:"Start Date",startIdentifier:"start_date",endTitle:"End Date",endIdentifier:"end_date",options:[{value:"all_time",title:"All Time"},{value:"last_3_months",title:"Last 3 Months"},{value:"last_6_months",title:"Last 6 Months"},{value:"last_9_months",title:"Last 9 Months"},{value:"last_12_months",title:"Last 12 Months"},{value:"last_15_months",title:"Last 15 Months"},{value:"last_18_months",title:"Last 18 Months"},{value:"custom",title:"Custom"}],defaultValue:{option:"all_time",startDate:new Date,endDate:new Date}},{identifier:"action_type",type:"select",title:"Action",options:[{value:"purchase",title:"Purchase"},{value:"verify",title:"Verification"},{value:"refund",title:"Refund"},{value:"all",title:"All"}],defaultValue:"all"},{identifier:"paymentMethod",type:"select",title:"Payment Method",options:[{value:"cash",title:"Cash"},{value:"debit_card",title:"Debit Card"},{value:"credit_card",title:"Credit Card"},{value:"online",title:"Online / Netbanking"},{value:"all",title:"All"}],defaultValue:"all"}],T=[{identifier:"new",title:"New",icon:y.a,primary:!0},{identifier:"filter",title:"Filter",icon:D.a,primary:!0},{identifier:"default",title:"Default",icon:C.a,primary:!0},{identifier:"delete",title:"Delete",icon:b.a,primary:!1}],S=[{identifier:"new",title:"New",icon:y.a,primary:!0},{identifier:"filter",title:"Filter",icon:D.a,primary:!0},{identifier:"compact",title:"Compact",icon:j.a,primary:!0},{identifier:"delete",title:"Delete",icon:b.a,primary:!1}];var x={fetchTransactions:g.z,newTransaction:g.H};t.default=Object(o.b)((function(e){return{transactions:e.transactions}}),x)(Object(s.h)((function(e){var t=e.transactions,a=e.fetchTransactions,c=e.newTransaction,o=e.history,s=e.location,g=k.a.parse(s.search),h=N(),b=Object(i.useState)([]),v=Object(n.a)(b,2),y=v[0],E=v[1],C=Object(i.useState)(Object.keys(g).length>0),w=Object(n.a)(C,2),D=w[0],O=w[1],j=Object(i.useState)(!1),_=Object(n.a)(j,2),x=_[0],M=_[1],R=Object(i.useState)(parseInt(g.page,10)||0),V=Object(n.a)(R,2),L=V[0],A=V[1],z=r.a.useState(g.limit||20),B=Object(n.a)(z,2),H=B[0],W=B[1],F=Object(m.b)(I,g),q=Object(i.useState)(F),J=Object(n.a)(q,2),U=J[0],Y=J[1],G=function(e,t,a){var n=Object(m.c)(I,e),i=new URLSearchParams(n);i.append("page",t),i.append("limit",a),o.push("/transactions?"+i.toString())};"page"in g&&"limit"in g||G(U,L,H),"start_date"in g&&(g.start_date=new Date(Number(g.start_date))),"end_date"in g&&(g.end_date=new Date(Number(g.end_date)));var K={purchase:"Purchase",verify:"Verification",refund:"Refund"},Q={cash:"Cash",credit_card:"Credit Card",debit_card:"Debit Card",online:"Online / Netbanking"};return Object(i.useEffect)((function(){var e=Object(m.c)(I,U);e.page=L,e.limit=H,a(e)}),[a,U,L,H]),r.a.createElement("div",null,r.a.createElement(u.a,{title:"Transactions",selectionCount:y.length,actions:x?T:S,onAction:function(e){"new"===e?c():"filter"===e?O(!D):"compact"!==e&&"default"!==e||M(!x)}}),r.a.createElement(l.a,{container:!0,className:h.container},r.a.createElement(l.a,{item:!0,lg:D?10:12},t&&t.records.length>0&&r.a.createElement(d.a,{headers:P,onSelected:E,selected:y,compact:x,onClick:function(e){o.push("/transactions/"+e.id)},renderCellValue:function(e,t,a,n){switch(a.id){case"referenceId":return e.referenceId;case"created":return Object(p.a)(e.createdAt);case"amount":return e.amount+" INR";case"tax":return e.tax+" INR";case"action":return K[e.action];case"method":return Q[e.paymentMethod];default:return"Unknown Column"}},rows:t.records,totalRows:t.totalRecords,page:L,rowsPerPage:H,onChangePage:function(e){A(e),G(U,e,H)},onChangeRowsPerPage:function(e){A(0),W(e),G(U,0,e)},descendingComparator:function(e,t,a){var n={referenceId:"referenceId",action:"action",method:"paymentMethod",created:"createdAt",amount:"amount"}[a],i=e[n],r=t[n];return"string"===typeof i?i=i.toLowerCase():i instanceof Date&&(i=i.getTime()),"string"===typeof r?r=r.toLowerCase():r instanceof Date&&(r=r.getTime()),r<i?-1:r>i?1:0}}),(!t||0===t.records.length)&&r.a.createElement(f.a,{message:"You have not created any transactions yet.",action:!0,actionText:"Create Transaction",actionHandler:c,image:"assets/images/empty-transactions.svg"})),D&&r.a.createElement(l.a,{item:!0,lg:2},r.a.createElement(m.a,{fields:I,values:U,onValueChange:function(e,t){var a=Object.assign({},U);a[e]=t,Y(a),G(a,L,H)},onClear:function(){var e=Object(m.b)(I,{});Y(e),G(e,L,H)}}))))})))}}]);
//# sourceMappingURL=12.6e463542.chunk.js.map